apiVersion: kpt.dev/v1alpha1
kind: Kptfile
metadata:
  name: gitlab-krm-operator
packageMetadata:
  shortDescription: Blueprint to install Gitlab KRM Operator
openAPI:
  definitions:
    io.k8s.cli.substitutions.gitlab-sub:
      x-k8s-cli:
        substitution:
          name: gitlab-sub
          pattern: gitlab-token=${gitlab-token}
          values:
          - marker: ${gitlab-token}
            ref: '#/definitions/io.k8s.cli.setters.gitlab-token'
    io.k8s.cli.setters.gitlab-token:
      x-k8s-cli:
        setter:
          name: gitlab-token
          value: GITLAB_TOKEN
    io.k8s.cli.substitutions.gitlab-url-sub:
      x-k8s-cli:
        substitution:
          name: gitlab-url-sub
          pattern: gitlab-base-url=${gitlab-base-url}
          values:
          - marker: ${gitlab-base-url}
            ref: '#/definitions/io.k8s.cli.setters.gitlab-base-url'
    io.k8s.cli.setters.gitlab-base-url:
      x-k8s-cli:
        setter:
          name: gitlab-base-url
          value: my-api
